# ===========================================
# MediConnect API Gateway Configuration
# ===========================================
# Copy this file to .env and customize values

# Rails Environment
RAILS_ENV=development
RAILS_MAX_THREADS=5
PORT=3000

# Application Version (for health checks)
APP_VERSION=1.0.0

# ===========================================
# Database Configuration
# ===========================================
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=api_gateway_development
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=postgres

# Production: Use DATABASE_URL instead
# DATABASE_URL=postgres://user:password@host:5432/database_name

# ===========================================
# Redis Configuration
# ===========================================
REDIS_URL=redis://localhost:6379/0

# ===========================================
# JWT Configuration
# ===========================================
# IMPORTANT: Change this in production!
JWT_SECRET=your_super_secret_jwt_key_change_in_production

# Access token expiration in seconds (default: 24 hours)
JWT_EXPIRATION=86400

# Refresh token expiration in seconds (default: 7 days)
JWT_REFRESH_EXPIRATION=604800

# Whether to revoke old refresh token when refreshing (default: true)
REVOKE_ON_REFRESH=true

# ===========================================
# Downstream Service URLs
# ===========================================
# Development (localhost)
USERS_SERVICE_URL=http://localhost:3001
DOCTORS_SERVICE_URL=http://localhost:3002
APPOINTMENTS_SERVICE_URL=http://localhost:3003
NOTIFICATIONS_SERVICE_URL=http://localhost:3004
PAYMENTS_SERVICE_URL=http://localhost:3005

# Docker Compose (use container names)
# USERS_SERVICE_URL=http://users-service:3001
# DOCTORS_SERVICE_URL=http://doctors-service:3002
# APPOINTMENTS_SERVICE_URL=http://appointments-service:3003
# NOTIFICATIONS_SERVICE_URL=http://notifications-service:3004
# PAYMENTS_SERVICE_URL=http://payments-service:3005

# ===========================================
# Rate Limiting Configuration
# ===========================================
# Requests per minute for unauthenticated users
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# Requests per minute for authenticated users
RATE_LIMIT_AUTHENTICATED_REQUESTS_PER_MINUTE=1000

# ===========================================
# HTTP Client Configuration
# ===========================================
# Request timeout in seconds
HTTP_CLIENT_TIMEOUT=10

# Connection timeout in seconds
HTTP_CLIENT_OPEN_TIMEOUT=5

# Maximum number of retries for failed requests
HTTP_CLIENT_MAX_RETRIES=3

# ===========================================
# CORS Configuration
# ===========================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:4200

# ===========================================
# Logging Configuration
# ===========================================
# Log level: debug, info, warn, error, fatal
LOG_LEVEL=debug

# ===========================================
# RabbitMQ Configuration (for event messaging)
# ===========================================
RABBITMQ_URL=amqp://guest:guest@localhost:5672

# ===========================================
# Sentry/Error Tracking (optional)
# ===========================================
# SENTRY_DSN=https://xxx@sentry.io/xxx

# ===========================================
# New Relic/APM (optional)
# ===========================================
# NEW_RELIC_LICENSE_KEY=xxx
# NEW_RELIC_APP_NAME=mediconnect-api-gateway
