# ==============================================================================
# MediConnect Payments Service - Environment Configuration
# ==============================================================================
# Copy this file to .env and fill in your values
# NEVER commit the .env file to version control
# ==============================================================================

# ==============================================================================
# RAILS CONFIGURATION
# ==============================================================================
RAILS_ENV=development
RAILS_MAX_THREADS=5
PORT=3005

# Rails master key (for credentials encryption)
# RAILS_MASTER_KEY=your-master-key-here

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=payments_service_development
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=postgres

# Production: Use DATABASE_URL instead
# DATABASE_URL=postgres://user:password@host:5432/database_name

# ==============================================================================
# REDIS CONFIGURATION
# ==============================================================================
# Redis URL for caching and Sidekiq
REDIS_URL=redis://localhost:6379/5

# ==============================================================================
# RABBITMQ CONFIGURATION
# ==============================================================================
# RabbitMQ URL for event publishing
RABBITMQ_URL=amqp://guest:guest@localhost:5672

# ==============================================================================
# JWT CONFIGURATION
# ==============================================================================
# Secret key for JWT token validation
# Must match the key used by the Users Service / API Gateway
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production

# ==============================================================================
# STRIPE CONFIGURATION (Required for Payment Processing)
# ==============================================================================
# Get your API keys from: https://dashboard.stripe.com/apikeys

# Secret API Key (sk_test_... for test mode, sk_live_... for production)
# Used for server-side API calls
STRIPE_SECRET_KEY=sk_test_your_secret_key_here

# Publishable Key (pk_test_... for test mode, pk_live_... for production)
# Used by frontend to initialize Stripe Elements
STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key_here

# Webhook Signing Secret (whsec_...)
# Get this from: https://dashboard.stripe.com/webhooks
# Required for verifying webhook signatures
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Optional: Override the Stripe API version (default: 2023-10-16)
# STRIPE_API_VERSION=2023-10-16

# Optional: Number of automatic retries for network errors (default: 2)
# STRIPE_MAX_NETWORK_RETRIES=2

# Optional: Stripe connection timeouts in seconds
# STRIPE_OPEN_TIMEOUT=30
# STRIPE_READ_TIMEOUT=80

# ==============================================================================
# CORS CONFIGURATION
# ==============================================================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# ==============================================================================
# LOGGING & MONITORING
# ==============================================================================
# Log level (debug, info, warn, error, fatal)
LOG_LEVEL=debug

# Application version (used in health checks)
APP_VERSION=1.0.0

# Optional: Enable event publishing in test environment
# ENABLE_EVENT_PUBLISHING=false

# ==============================================================================
# RATE LIMITING (Optional)
# ==============================================================================
# RATE_LIMIT_REQUESTS_PER_MINUTE=60

# ==============================================================================
# PRODUCTION CHECKLIST
# ==============================================================================
# Before deploying to production, ensure:
# 1. Use live Stripe keys (sk_live_..., pk_live_...)
# 2. Set up a separate webhook endpoint for production
# 3. Use strong, unique JWT_SECRET_KEY (min 32 chars)
# 4. Configure proper database credentials
# 5. Set RAILS_ENV=production
# 6. Enable HTTPS for all API endpoints
# 7. Set up proper monitoring and alerting
# 8. Configure secure Redis connection (rediss://)
# 9. Set LOG_LEVEL=info or warn
